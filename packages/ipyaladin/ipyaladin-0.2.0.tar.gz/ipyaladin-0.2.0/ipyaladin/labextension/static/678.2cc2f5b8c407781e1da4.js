"use strict";(self.webpackChunkipyaladin=self.webpackChunkipyaladin||[]).push([[678],{678:(e,t,a)=>{a.r(t),a.d(t,{AladinModel:()=>s,AladinView:()=>n,version:()=>d.i8});var o=a(672);a(297);var i=((e,t=!0,a="text/javascript")=>new Promise(((o,i)=>{try{const s=document.createElement("script");s.type=a,s.async=t,s.src=e,s.addEventListener("load",(e=>{o({status:!0})})),s.addEventListener("error",(e=>{i({status:!1,message:"Failed to load the script ï¼„{FILE_URL}"})})),document.getElementsByTagName("head")[0].appendChild(s)}catch(e){i(e)}})))("//aladin.u-strasbg.fr/AladinLite/api/v3/latest/aladin.js").then((async()=>{await A.init}));class s extends o.DOMWidgetModel{defaults(){return{...super.defaults(),_model_name:"AladinModel",_view_name:"AladinView",_model_module:"ipyaladin",_view_module:"ipyaladin",_model_module_version:"0.2.0",_view_module_version:"0.2.0"}}}var l=0;class n extends o.DOMWidgetView{render(){i.then((()=>{this.fov_js=!1,this.fov_py=!1,this.target_js=!1,this.target_py=!1,this.div&&this.el.remove(this.div),this.div=document.createElement("div"),this.div.id="aladin-lite-div"+parseInt(l),l+=1,this.div.setAttribute("style","width:100%;height:400px;");for(var e={},t=this.model.get("options"),a=0;a<t.length;a++)e[this.convert_pyname_to_jsname(t[a])]=this.model.get(t[a]);new MutationObserver((t=>{t.forEach((t=>{t.addedNodes.forEach((t=>{t.id==this.div.id&&setTimeout((()=>{this.al=A.aladin([this.div],e),this.aladin_events(),this.model_events()}),1e3)}))}))})).observe(this.el,{subtree:!1,childList:!0}),this.el.appendChild(this.div)}))}convert_pyname_to_jsname(e){var t,a=e.split("_");for(t=1;t<a.length;t++)a[t]=a[t].charAt(0).toUpperCase()+a[t].slice(1);return a.join("")}aladin_events(){var e=this;this.al.on("zoomChanged",(function(t){e.fov_py?e.fov_py=!1:(e.fov_js=!0,e.model.set("fov",parseFloat(t.toFixed(5))),e.touch())})),this.al.on("positionChanged",(function(t){e.target_py?e.target_py=!1:(e.target_js=!0,e.model.set("target",t.ra.toFixed(6)+" "+t.dec.toFixed(6)),e.touch())}))}model_events(){var e=this;this.listenTo(this.model,"change:fov",(function(){e.fov_js?e.fov_js=!1:(e.fov_py=!0,e.al.setFoV(e.model.get("fov")))}),this),this.listenTo(this.model,"change:target",(function(){e.target_js?e.target_js=!1:(e.target_py=!0,e.al.gotoObject(e.model.get("target")))}),this),this.listenTo(this.model,"change:coo_frame",(function(){e.al.setFrame(e.model.get("coo_frame"))}),this),this.listenTo(this.model,"change:survey",(function(){e.al.setImageSurvey(e.model.get("survey"))}),this),this.listenTo(this.model,"change:overlay_survey",(function(){e.al.setOverlayImageLayer(e.model.get("overlay_survey"))}),this),this.listenTo(this.model,"change:overlay_survey_opacity",(function(){e.al.getOverlayImageLayer().setAlpha(e.model.get("overlay_survey_opacity"))}),this),this.listenTo(this.model,"change:votable_from_URL_flag",(function(){e.al.addCatalog(A.catalogFromURL(e.model.get("votable_URL"),e.model.get("votable_options")))}),this),this.listenTo(this.model,"change:moc_from_URL_flag",(function(){e.al.addMOC(A.MOCFromURL(e.model.get("moc_URL"),e.model.get("moc_options")))}),this),this.listenTo(this.model,"change:moc_from_dict_flag",(function(){e.al.addMOC(A.MOCFromJSON(e.model.get("moc_dict"),e.model.get("moc_options")))}),this),this.listenTo(this.model,"change:table_flag",(function(){var t=A.catalog({onClick:"showTable"});e.al.addCatalog(t),t.addSourcesAsArray(e.model.get("table_keys"),e.model.get("table_columns"))}),this),this.listenTo(this.model,"change:overlay_from_stcs_flag",(function(){var t=A.graphicOverlay(e.model.get("overlay_options"));e.al.addOverlay(t),t.addFootprints(A.footprintsFromSTCS(e.model.get("stc_string")))}),this),this.listenTo(this.model,"change:listener_flag",(function(){var t=e.model.get("listener_type");e.al.on(t,(function(a){if("select"!==t)a&&e.send({event:"callback",type:t,data:{data:a.data,dec:a.dec,ra:a.ra,x:a.x,y:a.y}});else{for(var o=a,i=0;i<e.al.view.catalogs.length;i++)e.al.view.catalogs[i].deselectAll();var s=[];for(i=0;i<o.length;i++){var l=o[i];l.select(),s.push({data:l.data,dec:l.dec,ra:l.ra,x:l.x,y:l.y})}e.send({event:"callback",type:t,data:s})}}))}),this),this.listenTo(this.model,"change:rectangular_selection_flag",(function(){e.al.select()})),this.listenTo(this.model,"change:thumbnail_flag",(function(){e.al.exportAsPNG()})),this.listenTo(this.model,"change:color_map_flag",(function(){const t=e.model.get("color_map_name");e.al.getBaseImageLayer().setColormap(t)}))}}const d={i8:"0.2.0"}}}]);