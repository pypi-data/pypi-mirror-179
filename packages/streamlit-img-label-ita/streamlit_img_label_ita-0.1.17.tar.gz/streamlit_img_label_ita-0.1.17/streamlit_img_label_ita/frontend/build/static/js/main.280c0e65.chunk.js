(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{29:function(e,t,a){e.exports=a(44)},41:function(e,t){},42:function(e,t){},43:function(e,t){},44:function(e,t,a){"use strict";a.r(t);var n=a(11),c=a.n(n),o=a(27),i=a.n(o),r=a(6),s=a(13),f=a(9),l=a(24),u=a(21),d=Object(l.b)(function(e){var t,a=Object(n.useState)("light"),o=Object(f.a)(a,2),i=(o[0],o[1]),d=Object(n.useState)([]),h=Object(f.a)(d,2),m=h[0],b=h[1],g=Object(n.useState)(new u.fabric.Canvas("")),v=Object(f.a)(g,2),j=v[0],k=v[1],w=e.args,O=w.canvasWidth,E=w.canvasHeight,p=w.imageData,C=Object(n.useState)(0),R=Object(f.a)(C,2),x=R[0],S=R[1],L=document.createElement("canvas"),N=L.getContext("2d");if(L.width=O,L.height=E,N){var A=N.createImageData(O,E);A.data.set(p),N.putImageData(A,0,0),t=L.toDataURL()}else t="";Object(n.useEffect)(function(){var a=e.args,n=a.rects,c=a.boxColor,o=new u.fabric.Canvas("c",{enableRetinaScaling:!1,backgroundImage:t});n.forEach(function(e){var t=e.top,a=e.left,n=e.width,i=e.height;o.add(new u.fabric.Rect({left:a,top:t,fill:"",width:n,height:i,objectCaching:!0,stroke:c,strokeWidth:1,strokeUniform:!0,hasRotatingPoint:!1}))}),b(n.map(function(e){return e.label})),k(o),l.a.setFrameHeight()},[E,O,t]);var D=function(){S(0),j.getObjects().forEach(function(e){return j.remove(e)}),I([])},I=function(e){b(e);var t=j.getObjects().map(function(t,a){return Object(s.a)({},t.getBoundingRect(),{label:e[a]})});l.a.setComponentValue({rects:t})};Object(n.useEffect)(function(){if(j)return j.on("object:modified",function(){j.renderAll(),I(m)}),function(){j.off("object:modified")}});var M=function(e){i(e),"dark"===e?document.body.classList.add("dark-mode"):document.body.classList.remove("dark-mode")};return Object(n.useEffect)(function(){return window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",function(e){return M(e.matches?"dark":"light")}),M(window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),function(){window.matchMedia("(prefers-color-scheme: dark)").removeEventListener("change",function(){})}},[]),c.a.createElement(c.a.Fragment,null,c.a.createElement("canvas",{id:"c",width:O,height:E}),c.a.createElement("div",{className:""},c.a.createElement("button",{className:"",onClick:function(){var t={left:.15*O+3*x,top:.15*E+3*x,width:.2*O,height:.2*E};S(x+1),j.add(new u.fabric.Rect(Object(s.a)({},t,{fill:"",objectCaching:!0,stroke:e.args.boxColor,strokeWidth:1,strokeUniform:!0,hasRotatingPoint:!1}))),I([].concat(Object(r.a)(m),[""]))}},"Aggiungi Annotazione"),c.a.createElement("button",{className:"",onClick:function(){var e=j.getActiveObject(),t=j.getObjects().indexOf(e);j.remove(e),I(m.filter(function(e,a){return a!==t}))}},"Rimuovi annotazione selezionata"),c.a.createElement("button",{className:"",onClick:function(){D();var t=e.args,a=t.rects,n=t.boxColor;a.forEach(function(e){var t=e.top,a=e.left,c=e.width,o=e.height;j.add(new u.fabric.Rect({left:a,top:t,fill:"",width:c,height:o,objectCaching:!0,stroke:n,strokeWidth:1,strokeUniform:!0,hasRotatingPoint:!1}))}),I(m)}},"Reset"),c.a.createElement("button",{className:"",onClick:D},"Cancella tutto")))});i.a.render(c.a.createElement(c.a.StrictMode,null,c.a.createElement(d,null)),document.getElementById("root"))}},[[29,2,1]]]);
//# sourceMappingURL=main.280c0e65.chunk.js.map