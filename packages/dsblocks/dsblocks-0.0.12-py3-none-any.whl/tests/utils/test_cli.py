# AUTOGENERATED! DO NOT EDIT! File to edit: ../../../nbs/00_tests/utils/tst.cli.ipynb.

# %% auto 0
__all__ = ['test_dsblocks_install_git_hooks']

# %% ../../../nbs/00_tests/utils/tst.cli.ipynb 2
from dsblocks.utils.cli import *

# %% ../../../nbs/00_tests/utils/tst.cli.ipynb 3
import os
import pytest
import joblib
from IPython.display import display

from dsblocks.utils.utils import remove_previous_results

# %% ../../../nbs/00_tests/utils/tst.cli.ipynb 4
def test_dsblocks_install_git_hooks ():
    if os.path.exists('.git/hooks/pre-push'):
        os.remove ('.git/hooks/pre-push')
    
    dsblocks_install_git_hooks ()
    
    assert {'pre-commit'}.issubset(os.listdir ('.git/hooks'))
    with open('.git/hooks/pre-commit', 'rt') as f: txt = f.read ()
    assert txt.startswith ('#!/bin/sh\n\necho')
    assert txt.endswith ('$CONDA_DEFAULT_ENV.yml\n')
    
    os.remove ('.git/hooks/pre-commit')

